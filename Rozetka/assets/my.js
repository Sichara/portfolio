var GTMData_PayButton_class=GTMData_BaseAbstract_class.extend({options:{GTM:{events:{pay_button:{selector:'button[name="pay_order"]',extend_event:[{name:'eventAction',value:'click'},{name:'eventLabel',value:'payButton'},{name:'eventCategory',value:'Conversions'},{name:'eventContent',handler:'getEventContent'},{name:'eventValue',handler:'getEventValue'}]}}}},event_content:null,initialize:function(event_content){this.event_content=event_content},getEventContent:function(){return this.event_content},getEventValue:function(e){var target=new Event(e).target;return target.getAttribute('amount')}});var EndlessScroll_class=new Class({Class:'EndlessScroll_class',content:null,more_button:null,paginator:null,url:null,enabled:true,next_page:null,options:{content_selector:'[name=goods_list]',more_button_selector:'[name=more_goods]',paginator_selector:'[name=paginator]',active_page_class:'active',current_page:1,total_pages:1,append_to_bottom:true,page_param_name:'page',additional_params:{scroll:true}},initialize:function(parent_id,url){var parent=$(parent_id);this.content=parent.getElement(this.options.content_selector);this.more_button=parent.getElement(this.options.more_button_selector);this.paginator=parent.getElement(this.options.paginator_selector);this.url=url;this._bindEvents()},showPage:function(page){if(page>0&&page!=this.options.current_page&&page<=this.options.total_pages){this.content.processStart('<img src=\"https:\/\/i1.rozetka.com.ua\/ajax.gif\" width=\"64\" height=\"64\" alt=\"\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u0434\u0430\u043d\u043d\u044b\u0445\" class=\"process\"\/>');this.enabled=false;this._sendRequest(page)}},_sendRequest:function(page){var params={};params[this.options.page_param_name]=page;var url=App.buildUrl(this.url,Object.merge(params,this.options.additional_params));this.next_page=page;new Ajax(url,{method:'get',onComplete:this._onComplete.bind(this)}).request()},_onComplete:function(response){this.content.processStop();this.options.current_page=this.next_page;if(this.options.current_page==this.options.total_pages){this.more_button.addClass('hidden')}else{this.enabled=true}var div=new Element('div').setHTML(response);if(!this.options.append_to_bottom){this.content.innerHTML='';window.scrollTo(0,this.content.offsetTop)}this.content.adopt(div);if(this.paginator){this._setActivePage()}if(!window.gecko||window.ff4AndGreater){var scripts=div.getElements('script');if(scripts.length){scripts.each(this._execute)}}},_setActivePage:function(){var active_page=this.paginator.getElement('[name='+this.options.current_page+']')||this.paginator.getElement('[name=â€¦]')||null;if(active_page){active_page.addClass(this.options.active_page_class)}},_bindEvents:function(){if(this.more_button){this.more_button.addEvent('click',function(e){new Event(e).stop();if(this.enabled){this.showPage(this.options.current_page+1)}}.bind(this))}},_execute:function(script){eval(script.innerHTML)}});EndlessScroll_class.implement(new Options);var RozetkaPaginator_class=new Class({Class:'RozetkaPaginator_class',options:{template:'{for node in getPages()}\n\t<li class=\"paginator-catalog-l-i{if node.is_active} active{\/if}\" id=\"${node.name}\">\n\t\t{if node.is_active}\n\t\t\t<span class=\"novisited paginator-catalog-l-link\">${node.title}<\/span>\n\t\t{else}\n\t\t\t<span class=\"paginator-catalog-l-i-active hidden\">${node.title}<\/span>\n\t\t\t<a href=\"${node.link}\"\n\t\t\t   class=\"novisited paginator-catalog-l-link\"\n\t\t\t   onclick=\"document.fireEvent(\u0027pageNumberClick\u0027,{extend_event:[{name:\u0027eventContext\u0027,value:\u0027${node.value}\u0027}]});\"\n\t\t\t>${node.title}<\/a>\n\t\t{\/if}\n\t<\/li>\n{\/for}',page_param_name:'page',index_correction:0,midpoint:5,symbol_hellip:'&hellip;',additional_params:[],starts_from:1,current_page:0,total_pages:0},pages:[],_url:null,_container:null,initialize:function(container,url){this._container=container;this._url=url;return this},init:function(){this.options.starts_from=this.options.current_page;this.addEvent('loadComplete',this._loadComplete.bind(this));this.attachToObserver(['ChangeShowType']);return this},onChangeShowType:function(){this._updatePaginator()},_loadComplete:function(target_pagenum){this.options.current_page=target_pagenum;this._updatePaginator()},_getPageUrl:function(page){var params=this.options.additional_params;params[this.options.page_param_name]=page;return App.buildUrl(this._url,params)+document.location.hash},_updatePaginator:function(){var delta=(this.options.midpoint-1)/2+1,corrected_page=this.options.current_page+this.options.index_correction,limiter_left=Math.floor(corrected_page-delta),limiter_right=Math.ceil(corrected_page+delta),i;this.pages=[];this.pages[1]=this._getPageData(1);for(i=limiter_left;i<=limiter_right;i++){if(i>1&&i<this.options.total_pages){this.pages[i]=this._getPageData(i,limiter_left,limiter_right)}}this.pages[this.options.total_pages]=this._getPageData(this.options.total_pages);this._container.setHTML(App.getHTML(this.options.template,this))},getPages:function(){return this.pages},_getPageData:function(i,left,right){var page_corrected=i+this.options.index_correction;return{'link':this._getPageUrl(page_corrected),'name':'page'+page_corrected,'value':i,'title':this._isHellip(i,left,right)?this.options.symbol_hellip:i,'is_active':(i>=this.options.starts_from&&i<=this.options.current_page)}},_isHellip:function(page,left,right){return(page==left&&page>2)||(page==right&&right<this.options.total_pages-2)}});RozetkaPaginator_class.implement(new Events(),new Options());var RozetkaEndlessScroll_class=EndlessScroll_class.extend({options:{items_per_page:24,button_text_selector:'[name=button_text]',last_button_text:'',preloader_class:'run-animation',paginator:{classname:'RozetkaPaginator_class',enabled:false,midpoint:5,selector:'[name=paginator]',index_correction:0,additional_params:{}}},clicks_count:0,_container:null,_paginator:null,initialize:function(container,url){this._container=container;this.url=url;this.attachToObserver([])},init:function(){this.content=this._container.getElement(this.options.content_selector);this.more_button=this._container.getElement(this.options.more_button_selector);this.paginator=this._container.getElement(this.options.paginator_selector);this._bindEvents();var paginator_container=this._container.getElement(this.options.paginator.selector);if(this.options.paginator.enabled&&paginator_container){var class_construct=App.getConstructorByClassName(this.options.paginator.classname);this._paginator=new class_construct(paginator_container,this.url).setOptions({total_pages:this.options.total_pages,current_page:this.options.current_page,midpoint:this.options.paginator.midpoint,index_correction:this.options.paginator.index_correction,additional_params:this.options.paginator.additional_params,page_param_name:this.options.page_param_name}).init()}},showPage:function(page){if(page>0&&page!=this.options.current_page&&page<=this.options.total_pages){this.more_button.processStart('');this.more_button.addClass(this.options.preloader_class);this.enabled=false;this._sendRequest(page);this.clicks_count++;document.fireEvent('clickMoreButton',{extend_event:[{name:'eventLabel',value:this.options.items_per_page+'goodsMore'},{name:'eventPosition',value:this.clicks_count}]})}},_getUrl:function(page){var params={};params[this.options.page_param_name]=page;return App.buildUrl(this.url,Object.merge(params,this.options.additional_params))},_isHideMoreButton:function(){return this.options.current_page==this.options.total_pages},_sendRequest:function(page){var url=this._getUrl(page);new Ajax(url,{method:'get',onComplete:function(response){var elements=[];this.more_button.removeClass(this.options.preloader_class);this.more_button.processStop();this.options.current_page=page;var div=new Element('div').setHTML(response);var scripts=div.getElements('script');if(!this.options.append_to_bottom){this.content.innerHTML='';window.scrollTo(0,this.content.offsetTop)}this.more_button.getParent().removeChild(this.more_button);div.getChildren().each(function(elem){this.content.adopt(elem);elements.push(elem)}.bind(this));if(!this._isHideMoreButton()){this.content.adopt(this.more_button);if(this.options.last_button_text!=''&&this.options.current_page==this.options.total_pages-1){this.more_button.getElement(this.options.button_text_selector).innerHTML=this.options.last_button_text}this.enabled=true}if(!window.gecko||window.ff4AndGreater){if(scripts.length){scripts.each(this._execute)}}App.fireEvent('renewImages');this.firePluginEvent('loadContentComplete');if(this._paginator){this._paginator.fireEvent('loadComplete',this.options.current_page)}document.fireEvent('loadContentComplete');this.fireEvent('LoadBodyPage',elements)}.bind(this)}).request()}});RozetkaEndlessScroll_class.implement(new Events(),new Options(),new PluginEvents_class());var checkout_suggest=new RozetkaCheckoutSuggest_class().setOptions({tpl:'{if count}\n\t<ul class=\"suggestions\">\n\t\t{for record in records}\n\t\t\t<li class=\"suggestion-i\"\n\t\t\t\ttext=\"${record.title}{if record.big_city==0}{if record.region} - ${record.region} \u043e\u0431\u043b.{if record.show_all && record.district}, ${record.district} \u0440-\u043d{\/if}{\/if}{\/if}\"\n\t\t\t\tname=\"${record_index}\">${record.title}{if record.big_city==0}{if record.region} - ${record.region} \u043e\u0431\u043b.{if record.show_all && record.district}, ${record.district} \u0440-\u043d{\/if}{\/if}{\/if}\n\t\t\t<\/li>\n\t\t{\/for}\n\t<\/ul>\n{else}\n\t<ul class=\"suggestions\">\n\t\t<li class=\"suggestion-i not-found\">\u0413\u043e\u0440\u043e\u0434 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d. <br\/>\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043d\u0430\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0438\u043b\u0438 \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0431\u043b\u0438\u0436\u0430\u0439\u0448\u0438\u0439 \u043a \u0432\u0430\u043c!<\/li>\n\t<\/ul>\n{\/if}'});App.addOnDomReady(function(){var profile_cart=$E('[name=profile_cart_open]');profile_cart&&profile_cart.addEvent('click',function(e){new Event(e).stop();Cart.openCart();document.fireEvent('openCart')})});